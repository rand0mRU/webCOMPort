<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewwindow.port" content="width=device-width, initial-scale=1.0">
	<title>webPlotter</title>
    <script src="https://cdn.tailwindcss.com"></script>
	<!-- for old browsers -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {},
            },
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('theme') === 'dark' || 
                (!localStorage.getItem('theme') && 
                 window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.add('light');
            }
        });
    </script>
</head>

<body class="dark:bg-gray-800">
	<div class="p-5 pb-0">
		<div class="shadow-md border-gray-300 p-4 inline-block rounded-xl">
			<label for="baudRate" class="block mb-2 text-lg font-bold text-gray-900 dark:text-white">Подключение</label>
			<select style="display: inline-block;" id="baudRate"
				class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
				<option>300</option>
				<option>600</option>
				<option>750</option>
				<option>1200</option>
				<option>2400</option>
				<option>4800</option>
				<option selected>9600</option>
				<option>19200</option>
				<option>31250</option>
				<option>38400</option>
				<option>57600</option>
				<option>57600</option>
				<option>74880</option>
				<option>115200</option>
				<option>230400</option>
				<option>250000</option>
			</select>
			<button type="button" style="display: inline-block;"
				class="focus:outline-none text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-semibold rounded-lg text-sm px-5 py-2.5 me-2 ms-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
				onclick="connectToSerial()">Подключиться</button>
			<button type="button" style="display: inline-block;"
				class="focus:outline-none text-white focus:ring-4 font-semibold rounded-lg text-sm px-5 py-2.5 me-2 mb-2 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800"
				onclick="nowRead = false;disconnectFromSerial()">Отключится</button>
			<button type="button" style="display: inline-block;"
				class="stopRead focus:outline-none text-white focus:ring-4 font-semibold rounded-lg text-sm px-5 py-2.5 me-2 mb-2 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800"
				onclick="changeRead()">Остановить чтение</button>
		</div>
	</div>
	<div id="forCanvas" class="p-5 pt-3">
		<div id="msg" class="mb-3">
			<div class="shadow-md border-gray-300 p-4 rounded-xl inline-block w-full">
				<label for="message"
					class="block mb-2 text-lg font-bold text-gray-900 dark:text-white">Сообщение</label>
				<input type="text" id="message" placeholder="Напишите что-то..."
					class="mb-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" />
				<button type="button" style="display: inline-block;" id="sendMessage"
					class="focus:outline-none text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-semibold rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
					Отправить</button>
				<button type="button" style="display: inline-block;" id="clsMessage"
					class="focus:outline-none text-white focus:ring-4 font-semibold rounded-lg text-sm px-5 py-2.5 me-2 mb-2 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800">
					Очистить</button>
			</div>
		</div>
		<div id="plotter">
			<ul class="flex flex-wrap text-sm font-semibold text-center text-gray-400 mb-3">
				<li class="me-2">
					<a href="#canvas"
						class="inline-block px-4 py-3 text-white bg-blue-600 rounded-lg active">Плоттер</a>
				</li>
				<li class="me-2">
					<a href="#"
						class="monPortActivate inline-block px-4 py-3 rounded-lg hover:bg-blue-500 dark:hover:bg-gray-800 hover:text-white">Монитор
						порта</a>
				</li>
				<div class="absolute right-0 pe-3">
					<button type="button" style="display: inline-block;"
						class="stopRead focus:outline-none text-white focus:ring-4 font-semibold rounded-lg text-sm px-5 py-2.5 me-2 mb-2 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800"
						onclick="changeRead()">Остановить чтение</button>
				</div>
			</ul>

			<p class="block mb-2 text-xl font-bold text-gray-900 dark:text-white">Плоттер</p>
			<canvas id="canvas" class="h-[90vh] w-full dark:bg-gray-700 rounded-lg mb-3 shadow-lg"></canvas>
			<div class="shadow-md border-gray-300 p-3 rounded-xl">
				<p class="text-xl text-gray-900 dark:text-white mb-3 font-bold">Настройки</p>

				<div class="flex items-center mb-4">
					<input id="autosize" type="checkbox" value=""
						class="w-4 h-4 text-blue-600 rounded-sm focus:ring-blue-500 focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-300 border-gray-600">
					<label for="autosize"
						class="ms-2 text-sm font-semibold text-gray-900 dark:text-gray-300">Автомасштабирование</label>
				</div>

				<div class="mb-5">
					<label for="xmaxtext" class="block mb-2 text-sm font-semibold text-gray-900 dark:text-white">Ширина
						отрисовки</label>
					<input type="number" id="xmaxtext"
						class="mb-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" />

					<label for="ymaxtext" class="block mb-2 text-sm font-semibold text-gray-900 dark:text-white">Высота
						отрисовки</label>
					<input type="number" id="ymaxtext"
						class="mb-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" />
				</div>
			</div>

		</div>
		<div id="monport">
			<ul class="flex flex-wrap text-sm font-semibold text-center text-gray-400 mb-3">
				<li class="me-2">
					<a href="#"
						class="plotterActivate inline-block px-4 py-3 hover:bg-blue-500 dark:hover:bg-gray-800 hover:text-white rounded-lg">Плоттер</a>
				</li>
				<li class="me-2">
					<a href="#port" class="inline-block px-4 py-3 rounded-lg text-white bg-blue-600 active">Монитор
						порта</a>
				</li>
				<div class="absolute right-0 pe-3">
					<button type="button" style="display: inline-block;"
						class="stopRead focus:outline-none text-white focus:ring-4 font-semibold rounded-lg text-sm px-5 py-2.5 me-2 mb-2 bg-blue-600 hover:bg-blue-700 focus:ring-blue-800"
						onclick="changeRead()">Остановить чтение</button>
				</div>
			</ul>
			<label for="port" class="block mb-2 font-bold text-xl text-gray-900 dark:text-white">Монитор порта</label>
			<textarea id="port" rows="24"
				class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 mb-3"
				placeholder="Пока что тут пусто"></textarea>

			<div class="shadow-md border-gray-300 p-4 rounded-xl">
				<p class="text-xl text-gray-900 dark:text-white mb-3 font-bold">Настройки</p>

				<div class="flex items-center mb-4">
					<input id="autoscroll" type="checkbox" value=""
						class="w-4 h-4 text-blue-600 rounded-sm focus:ring-blue-500 focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-300 border-gray-600"
						checked>
					<label for="autoscroll"
						class="ms-2 text-sm font-semibold text-gray-900 dark:text-gray-300">Автопрокрутка</label>
				</div>
				<div class="flex items-center mb-4">
					<input id="autoshowtime" type="checkbox" value=""
						class="w-4 h-4 text-blue-600 rounded-sm focus:ring-blue-500 focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-300 border-gray-600">
					<label for="autoshowtime"
						class="ms-2 text-sm font-semibold text-gray-900 dark:text-gray-300">Показывать время</label>
				</div>
				<div class="flex items-center mb-4">
					<input id="autonewline" type="checkbox" value=""
						class="w-4 h-4 text-blue-600 rounded-sm focus:ring-blue-500 focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-300 border-gray-600"
						checked>
					<label for="autonewline"
						class="ms-2 text-sm font-semibold text-gray-900 dark:text-gray-300">Автоперенос строки</label>
				</div>
				<div class="mb-5">
					<label for="mxlines"
						class="block mb-2 text-sm font-semibold text-gray-900 dark:text-white">Максимальное количество
						строк</label>
					<input type="number" id="mxlines"
						class="mb-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" />
				</div>
			</div>
		</div>
		<div class="shadow-md border-gray-300 p-4 rounded-xl">
			<p class="text-xl text-gray-900 dark:text-white mb-3 font-bold">Информация о подключении</p>


			<p id="connectInfo" class="block mb-2 text-sm font-semibold text-gray-900 dark:text-white">Пока нет
				информации</label>
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="script.js"></script>
</body>

</html>